#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import json
import random

class SimpleInteriorAgent:
    """
    google.adk 문제를 우회하기 위한 간단한 인테리어 전문 에이전트
    실제 LLM 대신 규칙 기반 응답 + 향후 확장 가능한 구조
    """
    
    def __init__(self):
        self.name = "interior_assistant"
        self.description = "인테리어 프로젝트 전문 AI 어시스턴트"
        
        # 인테리어 관련 응답 템플릿
        self.responses = {
            "greeting": [
                "안녕하세요! 인테리어 프로젝트 전문 AI 어시스턴트입니다. 어떤 도움이 필요하신가요?",
                "반갑습니다! 인테리어 공사와 관련해서 무엇을 도와드릴까요?",
                "안녕하세요! 새로운 인테리어 프로젝트를 시작하시는군요. 자세히 알려주세요!"
            ],
            "project_start": [
                """🏠 **새로운 인테리어 프로젝트 시작 가이드**

다음 단계로 진행해보세요:

1️⃣ **현장 조사 및 측정**
   - 공간의 정확한 치수 측정
   - 기존 설비 상태 점검
   - 구조적 제약사항 파악

2️⃣ **예산 계획 수립**
   - 전체 예산 범위 설정
   - 우선순위별 공사 항목 분류
   - 예비비 10-20% 확보

3️⃣ **디자인 컨셉 정리**
   - 선호하는 스타일 결정
   - 색상 및 소재 선택
   - 가구 배치 계획

4️⃣ **시공사 선정**
   - 여러 업체 견적 비교
   - 포트폴리오 및 후기 확인
   - 계약서 세부사항 검토

구체적으로 어떤 부분에 대해 더 자세한 상담이 필요하신가요?""",
                
                """✨ **인테리어 프로젝트 체크리스트**

**준비 단계:**
□ 현장 상태 파악
□ 예산 범위 설정  
□ 공사 기간 계획
□ 필요 허가사항 확인

**설계 단계:**
□ 평면도 작성
□ 디자인 컨셉 확정
□ 자재 선택
□ 3D 시뮬레이션

**시공 단계:**
□ 철거 작업
□ 전기/배관 공사
□ 마감 공사
□ 청소 및 입주

어떤 단계에서 도움이 필요하신지 말씀해주세요!"""
            ],
            "address_management": [
                """📍 **현장 주소 관리 시스템**

현장 주소 등록 시 다음 정보가 필요합니다:

**기본 정보:**
- 정확한 주소 (도로명주소)
- 건물 유형 (아파트/주택/상가/오피스텔)
- 층수 및 호수
- 면적(평수)

**현장 접근성:**
- 주차 가능 여부
- 엘리베이터 유무
- 자재 반입 경로
- 소음 제한 시간

**연락처 정보:**
- 현장 책임자 연락처
- 관리사무소 연락처
- 비상 연락망

주소를 등록하시려면 위 정보를 알려주세요!""",
                
                """🏢 **현장 관리 TIP**

**효율적인 현장 관리를 위해:**

1. **체계적인 주소 분류**
   - 지역별 그룹화
   - 프로젝트 상태별 분류
   - 우선순위 표시

2. **정기적인 정보 업데이트**
   - 공사 진행률 반영
   - 연락처 변경사항 수정
   - 특이사항 기록

3. **백업 및 공유**
   - 클라우드 저장
   - 팀원 간 정보 공유
   - 보안 관리

현장 주소와 관련해 구체적으로 어떤 도움이 필요하신가요?"""
            ],
            "payment_plan": [
                """💰 **분할 지급 계획 가이드**

**표준 지급 단계:**

1️⃣ **계약금 (10-20%)**
   - 계약 체결 시
   - 설계 착수금 포함

2️⃣ **착공금 (30-40%)**
   - 실제 공사 시작 시
   - 자재 발주 비용 포함

3️⃣ **중도금 (30-40%)**
   - 공사 진행률 50-70% 시점
   - 주요 골조 완료 후

4️⃣ **잔금 (10-20%)**
   - 공사 완료 및 검수 후
   - 하자보수 보증금 포함

**예산별 지급 계획 예시:**
- 3000만원: 계약금 500만원, 착공금 1000만원, 중도금 1000만원, 잔금 500만원
- 5000만원: 계약금 800만원, 착공금 1800만원, 중도금 1800만원, 잔금 600만원

구체적인 예산 금액을 알려주시면 맞춤형 지급 계획을 제안해드릴게요!""",
                
                """📊 **지급 계획 관리 포인트**

**안전한 지급을 위한 원칙:**

✅ **단계별 검수 후 지급**
- 각 단계 완료 확인
- 품질 기준 충족 여부 점검
- 계획 대비 진행률 확인

✅ **계약서 명시사항 준수**
- 지급 조건 명확화
- 지연 시 처리 방안
- 변경 공사 비용 산정

✅ **증빙 서류 관리**
- 영수증 및 세금계산서
- 자재 구매 내역
- 하도급업체 지급 현황

💡 **TIP:** 마지막 잔금은 하자보수 기간 고려하여 공사 완료 1-2주 후 지급하는 것이 안전합니다.

예산 규모와 공사 기간을 알려주시면 더 구체적인 조언을 드릴 수 있어요!"""
            ],
            "schedule_management": [
                """📅 **공사 일정 관리 시스템**

**효율적인 일정 관리 방법:**

**1. 단계별 일정 계획**
```
1주차: 철거 및 폐기물 처리
2주차: 전기/배관 공사
3주차: 타일/도배 공사  
4주차: 마감재 설치
5주차: 청소 및 정리
```

**2. 일정 지연 요인 관리**
- 자재 수급 일정 확인
- 날씨 영향 고려
- 타 공종과의 협업 조율
- 검수 및 승인 시간 확보

**3. 실시간 진행 상황 추적**
- 일일 작업 보고서
- 사진을 통한 진행률 확인
- 문제 발생 시 즉시 대응

현재 진행 중인 프로젝트의 일정이 궁금하시거나, 새로운 일정을 세우고 싶으시다면 프로젝트 세부사항을 알려주세요!""",
                
                """⏰ **일정 관리 베스트 프랙티스**

**성공적인 프로젝트를 위한 일정 관리:**

🎯 **현실적인 일정 수립**
- 여유 시간 10-15% 확보
- 단계별 검수 시간 포함
- 예상 지연 요인 사전 고려

📋 **체크포인트 설정**
- 주간 진행 상황 점검
- 주요 마일스톤 확인
- 변경사항 즉시 반영

🔄 **유연한 대응 체계**
- 대안 계획 사전 준비
- 긴급 상황 대응 매뉴얼
- 이해관계자 소통 체계

📊 **진행률 시각화**
- 간트차트 활용
- 색상별 진행 상태 표시
- 완료율 정량적 측정

구체적인 프로젝트 일정을 확인하고 싶으시다면 프로젝트명이나 현장 주소를 알려주세요!"""
            ],
            "general_help": [
                """🔧 **인테리어 프로젝트 전문 서비스**

제가 도와드릴 수 있는 주요 분야들입니다:

**🏠 프로젝트 관리**
- 새 프로젝트 시작 가이드
- 공사 단계별 체크리스트
- 품질 관리 방법

**📍 현장 관리**
- 주소 등록 및 정보 관리
- 현장 접근성 평가
- 안전 관리 기준

**💰 비용 관리**
- 예산 계획 수립
- 분할 지급 일정
- 추가 공사 비용 산정

**📅 일정 관리**
- 공사 스케줄 계획
- 진행 상황 추적
- 지연 요인 분석

**📊 데이터 관리**
- 프로젝트 정보 저장
- 진행 현황 조회
- 완료 프로젝트 아카이브

구체적으로 어떤 부분에 대해 상담받고 싶으신가요?""",
                
                """💼 **인테리어 프로젝트 성공 전략**

**체계적인 접근 방법:**

1️⃣ **철저한 사전 준비**
   - 요구사항 명확화
   - 예산 현실성 검토
   - 일정 여유도 확보

2️⃣ **신뢰할 수 있는 파트너십**
   - 검증된 시공사 선택
   - 명확한 계약 조건
   - 정기적인 소통

3️⃣ **단계별 품질 관리**
   - 중간 검수 철저히
   - 문제 발생 시 즉시 대응
   - 완료 후 최종 점검

4️⃣ **사후 관리 체계**
   - 하자보수 기간 관리
   - 유지보수 계획 수립
   - 만족도 평가

어떤 단계에서 전문적인 조언이 필요하신지 말씀해주세요!"""
            ]
        }
    
    def generate(self, message: str) -> str:
        """메시지를 분석하여 적절한 응답을 생성합니다."""
        message_lower = message.lower()
        
        # 인사말 감지
        if any(word in message_lower for word in ['안녕', '하이', '헬로', '처음']):
            return random.choice(self.responses["greeting"])
        
        # 프로젝트 시작 관련
        elif any(word in message_lower for word in ['시작', '새로운', '프로젝트', '계획']):
            return random.choice(self.responses["project_start"])
        
        # 주소 관리 관련
        elif any(word in message_lower for word in ['주소', '현장', '등록', '위치']):
            return random.choice(self.responses["address_management"])
        
        # 지급 계획 관련
        elif any(word in message_lower for word in ['지급', '비용', '예산', '금액', '계획']):
            return random.choice(self.responses["payment_plan"])
        
        # 일정 관리 관련
        elif any(word in message_lower for word in ['일정', '스케줄', '진행', '완료']):
            return random.choice(self.responses["schedule_management"])
        
        # 도움말 요청
        elif any(word in message_lower for word in ['도움', '기능', '뭐', '할수있어']):
            return random.choice(self.responses["general_help"])
        
        # 기본 응답
        else:
            return """좋은 질문이네요! 인테리어 프로젝트와 관련해서 더 구체적으로 알려주시면 전문적인 조언을 드릴 수 있습니다.

예를 들어:
- "새로운 아파트 리모델링을 시작하고 싶어요"
- "현장 주소 등록 방법을 알려주세요"  
- "3000만원 예산으로 지급 계획을 세워주세요"
- "공사 일정 관리는 어떻게 하나요?"

어떤 부분에 대해 상담받고 싶으신가요?"""

# 에이전트 인스턴스 생성
interior_agent = SimpleInteriorAgent() 