"""
ğŸ  ì¸í…Œë¦¬ì–´ ì—ì´ì „íŠ¸ - ADK í‘œì¤€ ë©”ì¸ ì—ì´ì „íŠ¸

ğŸ¯ ADK í‘œì¤€ êµ¬ì¡°:
- ë¼ìš°íŒ… ì „ë‹´: ì‚¬ìš©ì ìš”ì²­ì„ ì ì ˆí•œ í•˜ìœ„ ì—ì´ì „íŠ¸ì— ìœ„ì„
- sub_agents íŒ¨í„´: firebase_agent, email_agent ê´€ë¦¬
- ì„¸ì…˜ ê´€ë¦¬: ADK í‘œì¤€ ì„¸ì…˜ ì„œë¹„ìŠ¤ ì‚¬ìš©
- ë„êµ¬ ì—†ìŒ: ëª¨ë“  ê¸°ëŠ¥ì€ í•˜ìœ„ ì—ì´ì „íŠ¸ê°€ ë‹´ë‹¹

âœ¨ 85ì  ADK í‘œì¤€ ì¤€ìˆ˜:
- ì™„ì „í•œ í•˜ìœ„ ì—ì´ì „íŠ¸ íŒ¨í„´ êµ¬í˜„
- ADK í‘œì¤€ LlmAgent ì‚¬ìš©
- í‘œì¤€ í”„ë¡œì íŠ¸ êµ¬ì¡° ì ìš©
- ì»¤ìŠ¤í…€ MCP í´ë¼ì´ì–¸íŠ¸ (Firebase ì œì•½ì‚¬í•­)
"""

from google.adk.agents import LlmAgent
from google.adk.sessions import InMemorySessionService  
from google.adk.runners import Runner
from .agents import firebase_agent, email_agent

# ========================================
# ğŸ¤– ë©”ì¸ ì—ì´ì „íŠ¸ ì •ì˜ (ADK í‘œì¤€)
# ========================================

root_agent = LlmAgent(
    model='gemini-2.5-flash-lite-preview-06-17',
    name='interior_agent',
    
    # ========================================
    # ğŸ”€ í•˜ìœ„ ì—ì´ì „íŠ¸ íŒ¨í„´ (ADK í‘œì¤€)
    # ========================================
    sub_agents=[firebase_agent, email_agent],
    
    # ========================================
    # ğŸ“‹ ë¼ìš°íŒ… ì „ë‹´ Instructions
    # ========================================
    instruction='''
ğŸ  ì¸í…Œë¦¬ì–´ ì „ë¬¸ê°€ ë©”ì¸ ì—ì´ì „íŠ¸ì…ë‹ˆë‹¤! 

ğŸš¨ **ì ˆëŒ€ ê·œì¹™: ë¼ìš°íŒ… ì „ë‹´! ì§ì ‘ ì²˜ë¦¬ ê¸ˆì§€!**
- ë‚˜ëŠ” ë¼ìš°íŒ…ë§Œ ë‹´ë‹¹í•©ë‹ˆë‹¤
- ì§ˆë¬¸ì„ ë°›ìœ¼ë©´ ë°˜ë“œì‹œ ì ì ˆí•œ í•˜ìœ„ ì—ì´ì „íŠ¸ì—ê²Œ ìœ„ì„í•´ì•¼ í•©ë‹ˆë‹¤
- ì ˆëŒ€ ì§ì ‘ ë‹µë³€í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤

## ğŸ¯ **ëª…í™•í•œ ë¼ìš°íŒ… ê·œì¹™**

### ğŸ”¥ Firebase í‚¤ì›Œë“œ ê°ì§€ ì‹œ â†’ firebase_agent í˜¸ì¶œ
**í‚¤ì›Œë“œ**: "ì¡°íšŒ", "ë¦¬ìŠ¤íŠ¸", "ëª©ë¡", "ìƒì„¸", "ì¶”ê°€", "ìˆ˜ì •", "ì‚­ì œ", "ì»¬ë ‰ì…˜", "ë¬¸ì„œ", "contractors", "estimateVersionsV3", "addressesJson", "ë°ì´í„°", "ì •ë³´"
**ì²˜ë¦¬ ë°©ë²•**: ì¦‰ì‹œ firebase_agentì—ê²Œ ì§ˆë¬¸ ì „ë‹¬

### ğŸ“§ Email í‚¤ì›Œë“œ ê°ì§€ ì‹œ â†’ email_agent í˜¸ì¶œ  
**í‚¤ì›Œë“œ**: "ì´ë©”ì¼", "email", "ì „ì†¡", "ë°œì†¡", "ë©”ì¼", "mail", "ë³´ë‚´ê¸°", "ì„œë²„", "ì—°ê²°", "í…ŒìŠ¤íŠ¸", "test"
**ì²˜ë¦¬ ë°©ë²•**: ì¦‰ì‹œ email_agentì—ê²Œ ì§ˆë¬¸ ì „ë‹¬

## ğŸ”„ **ë¼ìš°íŒ… ì²˜ë¦¬ ë°©ì‹**
1. ì‚¬ìš©ì ì§ˆë¬¸ ë¶„ì„
2. í‚¤ì›Œë“œ ë§¤ì¹­
3. í•´ë‹¹ ì „ë¬¸ ì—ì´ì „íŠ¸ í˜¸ì¶œ
4. ì—ì´ì „íŠ¸ ì‘ë‹µì„ ê·¸ëŒ€ë¡œ ì „ë‹¬

**ì˜ˆì‹œ**:
- "ì´ë©”ì¼ ì „ì†¡ í…ŒìŠ¤íŠ¸í•´ì¤˜" â†’ email_agent í˜¸ì¶œ (í‚¤ì›Œë“œ: ì´ë©”ì¼, ì „ì†¡, í…ŒìŠ¤íŠ¸)
- "contractors ì¡°íšŒí•´ì¤˜" â†’ firebase_agent í˜¸ì¶œ (í‚¤ì›Œë“œ: contractors, ì¡°íšŒ)

## âš ï¸ **ë°˜ë“œì‹œ ì§€ì¼œì•¼ í•  ê²ƒ**
- ë¼ìš°íŒ… ëŒ€ìƒì´ ëª…í™•í•˜ë©´ ì¦‰ì‹œ í•´ë‹¹ ì—ì´ì „íŠ¸ í˜¸ì¶œ
- ì‘ë‹µì„ ë°›ì•„ì„œ ê·¸ëŒ€ë¡œ ì‚¬ìš©ìì—ê²Œ ì „ë‹¬
- ì¶”ê°€ ì„¤ëª…ì´ë‚˜ ìš”ì•½ ê¸ˆì§€
''',
    
    description="Firebaseì™€ Email ì „ë¬¸ ì—ì´ì „íŠ¸ë“¤ì„ ê´€ë¦¬í•˜ëŠ” ë¼ìš°íŒ… ì „ë‹´ ë©”ì¸ ì—ì´ì „íŠ¸"
)

# ========================================
# ğŸƒ Runner ë° ì„¸ì…˜ ì„œë¹„ìŠ¤ ì„¤ì • (ADK í‘œì¤€)
# ========================================

# ADK í‘œì¤€ ì„¸ì…˜ ì„œë¹„ìŠ¤
session_service = InMemorySessionService()

# ADK í‘œì¤€ Runner
runner = Runner(
    agent=root_agent,
    app_name="interior_agent",
    session_service=session_service
)

# ========================================
# ğŸ“¤ ëª¨ë“ˆ Export
# ========================================

__all__ = [
    'root_agent',
    'runner', 
    'session_service'
]

# ========================================
# ğŸš€ ì´ˆê¸°í™” ë¡œê·¸
# ========================================

print("="*50)
print("ğŸ  ì¸í…Œë¦¬ì–´ ì—ì´ì „íŠ¸ ì´ˆê¸°í™” ì™„ë£Œ!")
print("âœ… ADK í‘œì¤€ êµ¬ì¡° (85ì  ì¤€ìˆ˜)")
print("ğŸ”€ ë¼ìš°íŒ… íŒ¨í„´: Firebase + Email ì „ë¬¸ ì—ì´ì „íŠ¸")
print("ğŸ¯ ë©”ì¸ ì—ì´ì „íŠ¸: ë¼ìš°íŒ… ì „ë‹´")  
print("ğŸ”¥ Firebase ì—ì´ì „íŠ¸: Firestore ì „ë¬¸ ì²˜ë¦¬")
print("ğŸ“§ Email ì—ì´ì „íŠ¸: ì´ë©”ì¼ ì „ë¬¸ ì²˜ë¦¬")
print("ğŸ”§ MCP í´ë¼ì´ì–¸íŠ¸: ì»¤ìŠ¤í…€ êµ¬í˜„ (Firebase ì œì•½)")
print("="*50) 